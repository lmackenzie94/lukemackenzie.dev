---
import { Image } from 'astro:assets';
import Layout from '../layouts/Layout.astro';
import { getCollection } from 'astro:content';
import Canvas from '../components/Canvas.astro';
import Hero from '../components/Hero.astro';

const projects = await getCollection('projects');
---

<Layout title="Luke MacKenzie.">
  <!-- <Canvas /> -->

  <Hero />

  <main class="container z-10">
    <!-- <h2
      transition:name="heading"
      class="text-gradient text-3xl font-black mb-6"
    >
      Projects
    </h2> -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
      {
        projects.map(project => {
          const { title, publishDate, images, tags } = project.data;
          const featuredImage = images[0];
          return (
            <a
              href={`/projects/${project.slug}`}
              transition:name={`project-${title}`}
              class="max-w-lg bg-white border border-gray-200 rounded-lg shadow-lg shadow-gray-100 overflow-hidden hover:shadow-none transition-shadow"
            >
              <article>
                <Image
                  src={featuredImage.src}
                  alt={featuredImage.alt}
                  format="webp"
                  class="aspect-video border-b border-gray-200 object-cover object-top"
                  widths={[800, 1200, 1600]}
                />
                <div class="p-4">
                  <h3 class="font-bold text-2xl mb-2">{title}</h3>

                  <ul>
                    {tags.map((tag, index) => (
                      <li
                        class={`text-xs rounded-full px-3 py-1 mr-2 mt-2 inline-block ${index % 2 === 0 ? 'bg-pink-100 text-pink-800' : 'bg-purple-100 text-purple-800'}`}
                      >
                        {tag}
                      </li>
                    ))}
                  </ul>
                </div>
              </article>
            </a>
          );
        })
      }
    </div>
  </main>
</Layout>

<style>
  /* .link-card-grid {
		display: grid;
		grid-template-columns: repeat(auto-fit, minmax(24ch, 1fr));
		gap: 2rem;
		padding: 0;
	} */
</style>
